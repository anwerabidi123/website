<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon guide d'orientation positive - La voie du succès</title>
    <link rel="icon" type="image/x-icon" href="../tnn.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- إضافة مكتبة jsPDF لتصدير PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Thème unifié pour Mon guide d'orientation positive - Version Responsive */

/* Variables CSS pour la cohérence du thème */
:root {
  --primary-color: #2c5aa0;
  --secondary-color: #e91e63;
  --accent-color: #ff9800;
  --text-color: #333;
  --text-light: #666;
  --background-color: #f8f9fa;
  --white: #ffffff;
  --border-color: #e0e0e0;
  --shadow: 0 2px 10px rgba(0,0,0,0.1);
  --border-radius: 8px;
  --transition: all 0.3s ease;
}

/* Reset et base */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.text {
  text-align: end;
}

.test {
  display: flex;
  flex-direction: row-reverse;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  color: var(--text-color);
  background-color: var(--background-color);
  overflow-x: hidden; /* Éviter le défilement horizontal */
}

/* Header */
.header {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: var(--white);
  padding: 1rem 0;
  box-shadow: var(--shadow);
  z-index: 1000;
}

.header-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-size: 1.8rem;
  font-weight: bold;
  text-decoration: none;
  color: var(--white);
  word-wrap: break-word; /* Permettre la coupure des mots longs */
}

.tagline {
  font-size: 0.9rem;
  opacity: 0.9;
  margin-top: 0.2rem;
}

/* Navigation */
.nav {
  background-color: var(--primary-color);
  padding: 0.5rem 0;
}

.nav-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

.nav-menu {
  display: flex;
  list-style: none;
  gap: 2rem;
  flex-wrap: wrap; /* Permettre le retour à la ligne */
}

.nav-item a {
  color: var(--white);
  text-decoration: none;
  padding: 0.5rem 1rem;
  border-radius: var(--border-radius);
  transition: var(--transition);
  white-space: nowrap; /* Éviter la coupure des liens */
}

.nav-item a:hover,
.nav-item a.active {
  background-color: rgba(255,255,255,0.2);
}

/* Container principal */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  width: 100%; /* Assurer la largeur complète */
}

/* Sections */
.section {
  background: var(--white);
  margin-bottom: 2rem;
  padding: 2rem;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  width: 100%; /* Assurer la largeur complète */
}

.section-title {
  color: var(--primary-color);
  font-size: 2rem;
  margin-bottom: 1rem;
  border-bottom: 3px solid var(--accent-color);
  padding-bottom: 0.5rem;
  word-wrap: break-word; /* Permettre la coupure des titres longs */
}

.section-subtitle {
  color: var(--secondary-color);
  font-size: 1.5rem;
  margin: 1.5rem 0 1rem 0;
}

.section-content {
    padding: 1.5rem;
    background-color: var(--white);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
}

.btn-group {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 2rem;
}

.progress-container {
    background-color: var(--light);
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    border-bottom: 1px solid var(--light-gray);
}

.progress-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    flex: 1;
}

.progress-step:not(:last-child)::after {
    content: '';
    position: absolute;
    top: 20px;
    right: 60%;
    width: 80%;
    height: 2px;
    background-color: var(--light-gray);
    z-index: 1;
}

.step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--light-gray);
    color: var(--gray);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-bottom: 5px;
    z-index: 2;
}

.progress-step.active .step-number {
    background-color: var(--primary);
    color: white;
}

.step-label {
    font-size: 0.85rem;
    color: var(--gray);
    text-align: center;
}

.progress-step.active .step-label {
    color: var(--primary);
    font-weight: 500;
}

.guide-container {
    background-color: #fff8e1;
    border-right: 4px solid #ffc107;
    padding: 20px;
    margin: 20px 0;
    border-radius: 8px;
}

.guide-container h3 {
    color: #ff9800;
    margin-bottom: 15px;
}

.guide-container ul, .guide-container ol {
    padding-right: 20px;
}

.guide-container li {
    margin-bottom: 10px;
    line-height: 1.7;
}

.guide-section {
    background-color: #e8f5e9;
    border-right: 4px solid #4caf50;
    padding: 15px;
    margin: 15px 0;
    border-radius: 8px;
}

.example {
    background-color: #e3f2fd;
    border-right: 4px solid #2196f3;
    padding: 15px;
    margin: 15px 0;
    border-radius: 8px;
    font-style: italic;
    color: #555;
    line-height: 1.7;
}

.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
}

.checkbox-item {
    display: flex;
    align-items: center;
    background: var(--light);
    padding: 12px 20px;
    border-radius: 8px;
    flex: 1 0 calc(33.333% - 15px);
    min-width: 200px;
    transition: all 0.3s;
}

.checkbox-item:hover {
    background: rgba(67, 97, 238, 0.05);
    transform: translateY(-2px);
}

.checkbox-item input {
    width: auto;
    margin-left: 10px;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

th, td {
    padding: 15px;
    text-align: right;
    border-bottom: 1px solid var(--light-gray);
}

th {
    background-color: var(--primary);
    color: white;
    font-weight: 600;
}

tr:nth-child(even) {
    background-color: var(--light);
}

.profession-details {
    display: none;
    background: var(--light);
    padding: 15px;
    border-radius: 8px;
    margin-top: 10px;
}

.profession-details.show {
    display: block;
}

.profession-details .row {
    margin-bottom: 15px;
}

.add-row-btn {
    background: var(--success);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    margin: 10px 0;
    display: flex;
    align-items: center;
    gap: 5px;
}

.add-row-btn:hover {
    background: #3d8b40;
}

.export-options {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    z-index: 1000;
    width: 90%;
    max-width: 500px;
    text-align: center;
}

.export-options.show {
    display: block;
}

.export-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 999;
}

.export-overlay.show {
    display: block;
}

.export-options .btn {
    margin: 10px;
    width: 200px;
}

.close-export {
    position: absolute;
    top: 15px;
    left: 15px;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--dark);
}

.loading {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.8);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

.loading.show {
    display: flex;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 5px solid rgba(67, 97, 238, 0.2);
    border-top: 5px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

</style>
</head>
<body dir="rtl">
    <!-- Header -->
    <header class="header">
        <div class="header-content test">
            <div>
                <a href="../index.html" class="logo">دليلي للتوجيه الإيجابي</a>
                <div class="tagline">طريق النجاح
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content">
            <ul class="nav-menu " style="justify-content: end;">

                <li class="nav-item"><a href="../espace-parent.html">فضاء الأولياء</a></li>
                <li class="nav-item"><a href="https://orientationpositive.tn/wp/%D8%AD%D9%82%D9%8A%D8%A8%D8%A9-%D8%A7%D9%84%D8%AA%D9%84%D9%85%D9%8A%D8%B0/">فضاء التلميذ</a></li>
                 <li class="nav-item"><a href="https://orientationpositive.tn/wp/%d8%ad%d9%82%d9%8a%d8%a8%d8%a9-%d8%a7%d9%84%d8%a3%d8%b3%d8%aa%d8%a7%d8%b0/">فضاء الاستاذ</a></li>
                <li class="nav-item"><a href="../index.html" class="active">الصفحة الرئيسية</a></li>
            </ul>
        </div>
    </nav>

    <!-- Contenu principal -->
<main class="container" id="portfolioContainer">
<section class="section">
    <h1 class="section-title">محفظة التوجيه المدرسي والجامعي</h1>
    <div class="section-content">
        <div class="progress-container">
            <div class="progress-step active">
                <div class="step-number">١</div>
                <div class="step-label">التعريف</div>
            </div>
            <div class="progress-step">
                <div class="step-number">٢</div>
                <div class="step-label">المعرفة الذاتية</div>
            </div>
            <div class="progress-step">
                <div class="step-number">٣</div>
                <div class="step-label">المهن</div>
            </div>
            <div class="progress-step">
                <div class="step-number">٤</div>
                <div class="step-label">المواد الدراسية</div>
            </div>
            <div class="progress-step">
                <div class="step-number">٥</div>
                <div class="step-label">الشعب</div>
            </div>
            <div class="progress-step">
                <div class="step-number">٦</div>
                <div class="step-label">النتائج</div>
            </div>
            <div class="progress-step">
                <div class="step-number">٧</div>
                <div class="step-label">المتابعة</div>
            </div>
        </div>

        <div class="content">
            <div class="guide-container">
                <h3><i class="fas fa-info-circle"></i> دليل الاستخدام</h3>
                <p>تساعدك هذه المحفظة على تنظيم تفكيرك التوجيهي. إليك كيفية استخدامها:</p>
                <ul>
                    <li><strong>املأ كل قسم</strong> بعناية وصدق</li>
                    <li><strong>حدث المحفظة بانتظام</strong> (كل ثلاثة أشهر أو بعد الأحداث المهمة)</li>
                    <li><strong>استخدم الأمثلة</strong> كإلهام لإجاباتك</li>
                    <li><strong>احفظ</strong> عملك بانتظام باستخدام زر الحفظ</li>
                    <li><strong>شاركها</strong> مع مستشار التوجيه للحصول على دعم مخصص</li>
                </ul>
            </div>

            <!-- Section 1: التعريف -->
            <div class="section">
                <div class="section-title" onclick="toggleSection(this)">
                    <i class="fas fa-user"></i>
                    <h2>التعريف</h2>
                </div>

                <div class="guide-section">
                    <h3>كيفية ملء هذا القسم؟</h3>
                    <p>عرف بنفسك بإيجاز. حدد اهتماماتك وطموحك المهني الحالي.
                       كن صادقًا - سيتطور هذا القسم مع تطور تفكيرك.</p>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="nom">الاسم واللقب</label>
                            <input type="text" id="nom" placeholder="مثال: أحمد بن علي">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="niveau">المستوى الدراسي الحالي</label>
                            <input type="text" id="niveau" placeholder="مثال: السنة الثانية ثانوي - علوم">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="etablissement">المؤسسة التعليمية</label>
                            <input type="text" id="etablissement" placeholder="مثال: معهد منوبة النموذجي">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="annee">السنة الدراسية</label>
                            <input type="text" id="annee" placeholder="مثال: 2023-2024">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="passions">اهتماماتي وهواياتي</label>
                    <textarea id="passions" placeholder="مثال: الموسيقى، الروبوتات، التصوير، القراءة..."></textarea>
                </div>

                <div class="form-group">
                    <label for="ambition">طموحي المهني في جملة واحدة</label>
                    <input type="text" id="ambition" placeholder="مثال: أن أصبح مهندسًا في الطيران المدني">
                </div>
            </div>

            <!-- Section 2: المعرفة الذاتية -->
            <div class="section">
                <div class="section-title" onclick="toggleSection(this)">
                    <i class="fas fa-brain"></i>
                    <h2>المعرفة الذاتية</h2>
                </div>

                <div class="guide-section">
                    <h3>كيفية ملء هذا القسم؟</h3>
                    <p>فكر في هويتك الحقيقية. إذا أجريت اختبارات توجيه (رياسيك، MBTI)،
                       فسجل نتائجك. وإلا فأجب بصدق عن أسئلة حول صفاتك ومهاراتك وقيمك.</p>
                </div>

                <h3 style="margin-bottom: 15px; color: var(--secondary);">اختبارات التوجيه</h3>

                <div class="example">
                    <p><strong>مثال :</strong> "أظهر اختبار رياسيك أنني من النوع الاستقصائي (I) والفني (A).
                    وهذا يتوافق مع اهتمامي بالعلوم والإبداع."</p>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="riasec">رياسيك (Holland)</label>
                            <input type="text" id="riasec" placeholder="مثال: ASE (فني، اجتماعي، ريادي)">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="mbti">MBTI</label>
                            <input type="text" id="mbti" placeholder="مثال: INFP">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>الذكاءات المتعددة</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel1">
                            <label for="intel1">اللغوي</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel2">
                            <label for="intel2">المنطقي-الرياضي</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel3">
                            <label for="intel3">المكاني</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel4">
                            <label for="intel4">الحركي</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel5">
                            <label for="intel5">الموسيقي</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel6">
                            <label for="intel6">الاجتماعي</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel7">
                            <label for="intel7">الشخصي</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="intel8">
                            <label for="intel8">الطبيعي</label>
                        </div>
                    </div>
                </div>

                <h3 style="margin: 25px 0 15px; color: var(--secondary);">الثقة بالنفس وتقدير الذات</h3>

                <div class="example">
                    <p><strong>مثال :</strong> "أشعر بالكفاءة عندما أعمل على مشاريع عملية. تزداد ثقتي بنفسي عندما أحصل على ردود فعل إيجابية حول عملي."</p>
                </div>

                <div class="form-group">
                    <label for="qualites">صفاتي الرئيسية</label>
                    <input type="text" id="qualites" placeholder="مثال: مثابر، مبدع، متعاون...">
                </div>

                <div class="form-group">
                    <label for="confiance">المواقف التي أشعر فيها بالكفاءة</label>
                    <textarea id="confiance" placeholder="مثال: عندما أعمل ضمن فريق، عندما أحل مشاكل معقدة..."></textarea>
                </div>

                <div class="form-group">
                    <label for="renforcement">ما يعزز ثقتي بنفسي</label>
                    <textarea id="renforcement" placeholder="مثال: تحقيق تحدٍ، تلقي ملاحظات إيجابية..."></textarea>
                </div>

                <h3 style="margin: 25px 0 15px; color: var(--secondary);">القيم والمهارات الأساسية</h3>

                <div class="form-group">
                    <label for="valeurs">قيمي الأساسية الثلاث</label>
                    <div class="row">
                        <div class="col">
                            <input type="text" id="valeur1" placeholder="مثال: الإبداع">
                        </div>
                        <div class="col">
                            <input type="text" id="valeur2" placeholder="مثال: العدالة">
                        </div>
                        <div class="col">
                            <input type="text" id="valeur3" placeholder="مثال: الحرية">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="competences">مهاراتي القابلة للنقل</label>
                    <textarea id="competences" placeholder="مثال: حل النزاعات، تحليل البيانات، التواصل..."></textarea>
                </div>
            </div>

            <!-- Section 3: المعرفة بالمهن (محسنة) -->
            <div class="section">
                <div class="section-title" onclick="toggleSection(this)">
                    <i class="fas fa-briefcase"></i>
                    <h2>المعرفة بالمهن</h2>
                </div>

                <div class="guide-section">
                    <h3>كيفية ملء هذا القسم؟</h3>
                    <p>اذكر المهن التي تهمك. لكل منها، سجل ما يثير اهتمامك والنقاط التي قد لا تتوافق مع شخصيتك.
                       أذكر أيضًا اللقاءات التي ألهمتك. يمكنك إضافة المزيد من التفاصيل بالضغط على أي مهنة.</p>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>المهنة المثيرة للاهتمام</th>
                            <th>المجال المهني</th>
                            <th>لماذا؟</th>
                            <th>المهارات المطلوبة</th>
                            <th>المؤهلات الدراسية</th>
                            <th>التفاصيل</th>
                        </tr>
                    </thead>
                    <tbody id="professionsTable">
                        <tr onclick="toggleProfessionDetails(this)">
                            <td><input type="text" placeholder="مثال: مصمم جرافيك"></td>
                            <td><input type="text" placeholder="مثال: الإعلامية والاتصال"></td>
                            <td><input type="text" placeholder="مثال: أحب الإبداع"></td>
                            <td><input type="text" placeholder="مثال: الإبداع، البرامج التقنية"></td>
                            <td><input type="text" placeholder="مثال: إجازة في الفنون"></td>
                            <td><i class="fas fa-chevron-down"></i></td>
                        </tr>
                        <tr class="profession-details">
                            <td colspan="6">
                                <div class="row">
                                    <div class="col">
                                        <label>نوع العمل</label>
                                        <input type="text" placeholder="مثال: حر، شركة، مؤسسة">
                                    </div>
                                    <div class="col">
                                        <label>المتوسط السنوي</label>
                                        <input type="text" placeholder="مثال: 35,000 د.ت">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <label>المسار التطوري</label>
                                        <input type="text" placeholder="مثال: مصمم -> مدير فني">
                                    </div>
                                    <div class="col">
                                        <label>المواد الدراسية الأساسية</label>
                                        <input type="text" placeholder="مثال: فنون، إعلامية">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>ملاحظات إضافية</label>
                                    <textarea placeholder="مثال: يحتاج إلى مواكبة التطور التقني المستمر"></textarea>
                                </div>
                            </td>
                        </tr>
                        <tr onclick="toggleProfessionDetails(this)">
                            <td><input type="text" placeholder="مثال: أستاذ"></td>
                            <td><input type="text" placeholder="مثال: التعليم"></td>
                            <td><input type="text" placeholder="مثال: نقل المعرفة"></td>
                            <td><input type="text" placeholder="مثال: تواصل، صبر"></td>
                            <td><input type="text" placeholder="مثال: إجازة في التخصص"></td>
                            <td><i class="fas fa-chevron-down"></i></td>
                        </tr>
                        <tr class="profession-details">
                            <td colspan="6">
                                <div class="row">
                                    <div class="col">
                                        <label>نوع العمل</label>
                                        <input type="text" placeholder="مثال: مؤسسة تعليمية">
                                    </div>
                                    <div class="col">
                                        <label>المتوسط السنوي</label>
                                        <input type="text" placeholder="مثال: 28,000 د.ت">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <label>المسار التطوري</label>
                                        <input type="text" placeholder="مثال: أستاذ -> مدير مؤسسة">
                                    </div>
                                    <div class="col">
                                        <label>المواد الدراسية الأساسية</label>
                                        <input type="text" placeholder="مثال: تخصص علمي، علوم تربوية">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>ملاحظات إضافية</label>
                                    <textarea placeholder="مثال: يتطلب شهادة الكفاءة المهنية"></textarea>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <button class="add-row-btn" onclick="addProfessionRow()"><i class="fas fa-plus"></i> إضافة مهنة جديدة</button>

                <div class="form-group">
                    <label for="rencontres">لقاءات ملهمة (متخصصون قابلتهم)</label>
                    <textarea id="rencontres" placeholder="مثال: السيد محمد، مهندس معماري - نصحني: 'يجب أن تكون مثابرًا ومبدعًا'"></textarea>
                </div>

                <div class="form-group">
                    <label for="sources">مصادر معلوماتي</label>
                    <textarea id="sources" placeholder="مثال: المعهد الوطني للتوجيه المدرسي والمهني، معارض المهن، التداريب..."></textarea>
                </div>
            </div>

            <!-- Section 4: المواد الدراسية -->
            <div class="section">
                <div class="section-title" onclick="toggleSection(this)">
                    <i class="fas fa-book"></i>
                    <h2>المواد الدراسية</h2>
                </div>

                <div class="guide-section">
                    <h3>كيفية ملء هذا القسم؟</h3>
                    <p>حدد المواد الدراسية التي تحبها والتي تجيدها، واربطها بالمهن والشعب التي تفكر فيها.
                       هذا سيساعدك على فهم التوجهات التي تناسبك أكاديميًا.</p>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>المادة الدراسية</th>
                            <th>أحب هذه المادة</th>
                            <th>أجيد هذه المادة</th>
                            <th>المهن المرتبطة</th>
                            <th>الشعب المرتبطة</th>
                            <th>المستوى الحالي</th>
                        </tr>
                    </thead>
                    <tbody id="subjectsTable">
                        <tr>
                            <td><input type="text" placeholder="الرياضيات"></td>
                            <td><input type="checkbox" checked></td>
                            <td><input type="checkbox" checked></td>
                            <td><input type="text" placeholder="مهندس، مبرمج"></td>
                            <td><input type="text" placeholder="هندسة، علوم"></td>
                            <td>
                                <select>
                                    <option>ممتاز</option>
                                    <option selected>جيد جدًا</option>
                                    <option>جيد</option>
                                    <option>متوسط</option>
                                    <option>ضعيف</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="الفيزياء"></td>
                            <td><input type="checkbox" checked></td>
                            <td><input type="checkbox"></td>
                            <td><input type="text" placeholder="مهندس، فيزيائي"></td>
                            <td><input type="text" placeholder="هندسة، علوم"></td>
                            <td>
                                <select>
                                    <option>ممتاز</option>
                                    <option>جيد جدًا</option>
                                    <option selected>جيد</option>
                                    <option>متوسط</option>
                                    <option>ضعيف</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <button class="add-row-btn" onclick="addSubjectRow()"><i class="fas fa-plus"></i> إضافة مادة جديدة</button>

                <div class="form-group" style="margin-top: 25px;">
                    <label for="subjectAnalysis">تحليل المواد الدراسية</label>
                    <textarea id="subjectAnalysis" placeholder="مثال: المواد العلمية هي الأقرب لاهتماماتي، بينما المواد الأدبية أجد صعوبة في استيعابها رغم أنني أجيد التعبير الكتابي..."></textarea>
                </div>
            </div>

            <!-- Section 5: الشعب والتخصصات -->
            <div class="section">
                <div class="section-title" onclick="toggleSection(this)">
                    <i class="fas fa-book-open"></i>
                    <h2>الشعب والتخصصات الدراسية</h2>
                </div>

                <div class="guide-section">
                    <h3>كيفية ملء هذا القسم؟</h3>
                    <p>حدد الشعب التي تتوافق مع اهتماماتك وملفك الشخصي.
                       لا تنسَ التخطيط للبدائل (الخيار ب).</p>
                </div>

                <div class="example">
                    <p><strong>مثال :</strong> "أهدف إلى الحصول على إجازة في المعلوماتية بجامعة تونس المنار.
                    كبديل، أفكر في دبلوم تقني في المعلوماتية بالتناوب."</p>
                </div>

                <div class="form-group">
                    <label for="filieres">الشعب المقترحة بعد البكالوريا</label>
                    <div class="row">
                        <div class="col">
                            <input type="text" placeholder="الشعبة ١ (مثال: إجازة في المعلوماتية)">
                        </div>
                        <div class="col">
                            <input type="text" placeholder="المؤسسة المستهدفة (مثال: جامعة تونس المنار)">
                        </div>
                    </div>
                    <div class="row" style="margin-top: 10px;">
                        <div class="col">
                            <input type="text" placeholder="الشعبة ٢ (مثال: دبلوم تقني في الهندسة المدنية)">
                        </div>
                        <div class="col">
                            <input type="text" placeholder="المؤسسة المستهدفة (مثال: المعهد العالي للدراسات التكنولوجية بسوسة)">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="specialites">التخصصات/الخيارات المختارة هذا العام</label>
                    <textarea id="specialites" placeholder="مثال: رياضيات متقدمة، فيزياء-كيمياء، فنون تشكيلية..."></textarea>
                </div>

                <div class="form-group">
                    <label for="alternatives">بدائل ممكنة (الخيار ب)</label>
                    <textarea id="alternatives" placeholder="مثال: شهادة تقنية في التصميم الجرافيكي، تكوين بالتناوب..."></textarea>
                </div>
            </div>

            <!-- Section 6: النتائج الدراسية -->
            <div class="section">
                <div class="section-title" onclick="toggleSection(this)">
                    <i class="fas fa-chart-line"></i>
                    <h2>النتائج الدراسية</h2>
                </div>

                <div class="guide-section">
                    <h3>كيفية ملء هذا القسم؟</h3>
                    <p>سجل نتائجك الدراسية الحديثة. حدد نقاط قوتك وضعفك في كل مادة.
                       هذا القسم مهم لتحديد الشعب التي تتوافق مع ملفك الأكاديمي.</p>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>المادة</th>
                            <th>المعدل</th>
                            <th>نقاط القوة</th>
                            <th>الصعوبات</th>
                            <th>التحسينات المقترحة</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="الرياضيات"></td>
                            <td><input type="text" placeholder="15.5"></td>
                            <td><input type="text" placeholder="الجبر، المنطق"></td>
                            <td><input type="text" placeholder="الهندسة الفراغية"></td>
                            <td><input type="text" placeholder="ممارسة تمارين إضافية"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="اللغة العربية"></td>
                            <td><input type="text" placeholder="13.2"></td>
                            <td><input type="text" placeholder="التعبير الكتابي"></td>
                            <td><input type="text" placeholder="تحليل النصوص"></td>
                            <td><input type="text" placeholder="قراءة أكثر"></td>
                        </tr>
                    </tbody>
                </table>

                <button class="add-row-btn" onclick="addResultRow()"><i class="fas fa-plus"></i> إضافة مادة جديدة</button>

                <div class="form-group">
                    <label for="commentaires">ملاحظات الأساتذة الهامة</label>
                    <textarea id="commentaires" placeholder="مثال: 'إمكانات ممتازة في العلوم، يجب تطوير التعبير الكتابي' (أستاذ العربية)"></textarea>
                </div>

                <div class="form-group">
                    <label for="diplomes">الشهادات/الرخص المحصل عليها</label>
                    <textarea id="diplomes" placeholder="مثال: شهادة ختم التعليم الأساسي بميزة حسن جدًا، شهادة كامبردج الإنجليزية B2..."></textarea>
                </div>
            </div>

            <!-- Section 7: المتابعة والتقييم -->
            <div class="section">
                <div class="section-title" onclick="toggleSection(this)">
                    <i class="fas fa-calendar-check"></i>
                    <h2>المتابعة والتقييم</h2>
                </div>

                <div class="guide-section">
                    <h3>كيفية ملء هذا القسم؟</h3>
                    <p>حدث هذا القسم بانتظام (كل شهرين أو ثلاثة أشهر). سجل اكتشافاتك،
                       الأحداث المهمة وكيف يتطور تفكيرك.</p>
                </div>

                <h3 style="margin-bottom: 15px; color: var(--secondary);">سجل المتابعة</h3>

                <table>
                    <thead>
                        <tr>
                            <th>التاريخ</th>
                            <th>الحدث/التفكير</th>
                            <th>تأثيره على توجيهي</th>
                            <th>المصدر</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="15/09/2023"></td>
                            <td><input type="text" placeholder="تدريب في مؤسسة - اكتشاف مهنة المهندس"></td>
                            <td><input type="text" placeholder="تأكيد اهتمامي بالعلوم"></td>
                            <td><input type="text" placeholder="شركة تقنية"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="10/10/2023"></td>
                            <td><input type="text" placeholder="معرض المهن - لقاء مع مهندس معماري"></td>
                            <td><input type="text" placeholder="اكتشاف مهنة جديدة مثيرة للاهتمام"></td>
                            <td><input type="text" placeholder="معرض الجامعات"></td>
                        </tr>
                    </tbody>
                </table>

                <button class="add-row-btn" onclick="addFollowupRow()"><i class="fas fa-plus"></i> إضافة حدث جديد</button>

                <h3 style="margin: 25px 0 15px; color: var(--secondary);">تقييم ذاتي</h3>

                <div class="form-group">
                    <label for="confirmations">ما أكد خياراتي</label>
                    <textarea id="confirmations" placeholder="مثال: ازداد اهتمامي بالإبداع الرقمي..."></textarea>
                </div>

                <div class="form-group">
                    <label for="changements">ما تغير في رؤيتي</label>
                    <textarea id="changements" placeholder="مثال: اكتشفت أنني أفضل العمل ضمن فريق..."></textarea>
                </div>

                <div class="form-group">
                    <label for="objectifs">أهدافي للثلاثي القادم</label>
                    <div class="row">
                        <div class="col">
                            <input type="text" placeholder="الهدف ١ (مثال: زيارة جامعتين)">
                        </div>
                        <div class="col">
                            <input type="text" placeholder="الموعد النهائي (مثال: 30/11/2023)">
                        </div>
                    </div>
                    <div class="row" style="margin-top: 10px;">
                        <div class="col">
                            <input type="text" placeholder="الهدف ٢ (مثال: الحصول على تدريب)">
                        </div>
                        <div class="col">
                            <input type="text" placeholder="الموعد النهائي (مثال: 15/12/2023)">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Guide de partage -->
            <div class="guide-container">
                <h3><i class="fas fa-share-alt"></i> كيفية مشاركة المحفظة مع مستشارك؟</h3>
                <p>بعد ملء محفظتك، إليك كيفية مشاركتها:</p>
                <ol>
                    <li><strong>احفظ بصيغة PDF</strong> : استخدم زر "تصدير PDF" أدناه</li>
                    <li><strong>أرسل عبر البريد الإلكتروني</strong> : أرسل ملف PDF المصدّر لمستشارك</li>
                    <li><strong>شارك عبر التخزين السحابي</strong> : انزل ملف PDF على خدمة تخزين سحابي وشارك الرابط</li>
                    <li><strong>أحضر نسخة مطبوعة</strong> معك عند موعدك</li>
                    <li><strong>ناقش معًا</strong> الأقسام التي تستحق المزيد من الاهتمام</li>
                </ol>
                <p>تذكر تحديث محفظتك كل ثلاثة أشهر وإعادة مشاركتها بعد كل تحديث مهم.</p>
            </div>

            <div class="action-buttons btn-group">
                <button class="btn" onclick="saveData()"><i class="fas fa-save"></i> حفظ المحفظة</button>
                <button class="btn btn-outline" onclick="clearData()"><i class="fas fa-trash-alt"></i> مسح المحفظة</button>
                <button class="btn" onclick="showExportOptions()"><i class="fas fa-share-alt"></i> مشاركة وتصدير</button>
            </div>
        </div>
    </div>
</section>
</main>

    <script>
        // تابع لعرض مؤشر الحفظ
        function showSaveIndicator(message = "تم الحفظ بنجاح") {
            const indicator = document.getElementById('saveIndicator');
            indicator.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            indicator.style.display = 'block';
            setTimeout(() => {
                indicator.style.display = 'none';
            }, 3000);
        }

        // تابع لإظهار خيارات التصدير
        function showExportOptions() {
            document.getElementById('exportOptions').classList.add('show');
            document.getElementById('exportOverlay').classList.add('show');
        }

        // تابع لإخفاء خيارات التصدير
        function closeExportOptions() {
            document.getElementById('exportOptions').classList.remove('show');
            document.getElementById('exportOverlay').classList.remove('show');
        }

        // تابع لإظهار مؤشر التحميل
        function showLoadingIndicator() {
            document.getElementById('loadingIndicator').classList.add('show');
        }

        // تابع لإخفاء مؤشر التحميل
        function hideLoadingIndicator() {
            document.getElementById('loadingIndicator').classList.remove('show');
        }

        // تابع لتصدير المحفظة كملف PDF
        function exportAsPDF() {
            showLoadingIndicator();
            closeExportOptions();

            setTimeout(() => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('p', 'mm', 'a4');
                const portfolio = document.getElementById('portfolioContainer');
               html2canvas(portfolio, {
                    scale: 2,
                    useCORS: true,
                    logging: false
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const imgWidth = 210; // A4 width in mm
                    const pageHeight = 297; // A4 height in mm
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    let heightLeft = imgHeight;
                    let position = 0;

                    doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;

                    // Add extra pages if the content is longer than one page
                    while (heightLeft >= 0) {
                        position = heightLeft - imgHeight;
                        doc.addPage();
                        doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                        heightLeft -= pageHeight;
                    }

                    doc.save('محفظة_التوجيه_المدرسي.pdf');
                    hideLoadingIndicator();
                    showSaveIndicator('تم تصدير المحفظة كملف PDF بنجاح');
                }).catch(err => {
                    console.error('خطأ في تصدير PDF:', err);
                    hideLoadingIndicator();
                    alert('حدث خطأ أثناء تصدير PDF. الرجاء المحاولة مرة أخرى.');
                });
            }, 500);
        }

        // تابع لتصدير المحفظة كملف HTML
        function exportAsHTML() {
            closeExportOptions();
            showLoadingIndicator();

            setTimeout(() => {
                try {
                    const source = document.documentElement.outerHTML;
                    const blob = new Blob([source], { type: 'text/html' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'محفظة_التوجيه_المدرسي.html';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    hideLoadingIndicator();
                    showSaveIndicator('تم تصدير المحفظة كملف HTML بنجاح');
                } catch (err) {
                    console.error('خطأ في تصدير HTML:', err);
                    hideLoadingIndicator();
                    alert('حدث خطأ أثناء تصدير HTML. الرجاء المحاولة مرة أخرى.');
                }
            }, 500);
        }

        // تابع لحفظ البيانات في التخزين المحلي
        function saveData() {
            const formData = {};

            // جمع البيانات من الحقول الأساسية
            document.querySelectorAll('input, textarea, select').forEach(element => {
                if (element.type === 'checkbox') {
                    formData[element.id] = element.checked;
                } else {
                    formData[element.id] = element.value;
                }
            });

            // تخزين البيانات في localStorage
            localStorage.setItem('orientationPortfolioData', JSON.stringify(formData));
            showSaveIndicator();
        }

        // تابع لتحميل البيانات من التخزين المحلي
        function loadData() {
            const savedData = localStorage.getItem('orientationPortfolioData');

            if (savedData) {
                if (confirm('هل تريد استعادة البيانات المحفوظة؟ سيتم استبدال البيانات الحالية.')) {
                    const formData = JSON.parse(savedData);

                    Object.keys(formData).forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = formData[id];
                            } else {
                                element.value = formData[id];
                            }
                        }
                    });

                    showSaveIndicator('تم استعادة البيانات بنجاح');
                }
            } else {
                alert('لا توجد بيانات محفوظة للاستعادة.');
            }
        }

        // تابع لمسح جميع البيانات
        function clearData() {
            if (confirm('هل أنت متأكد أنك تريد مسح جميع بيانات المحفظة؟ هذا الإجراء لا يمكن التراجع عنه.')) {
                document.querySelectorAll('input, textarea, select').forEach(element => {
                    if (element.type === 'checkbox') {
                        element.checked = false;
                    } else if (element.type === 'text' || element.type === 'textarea') {
                        element.value = '';
                    } else if (element.tagName === 'SELECT') {
                        element.selectedIndex = 0;
                    }
                });

                localStorage.removeItem('orientationPortfolioData');
                showSaveIndicator('تم مسح جميع البيانات بنجاح');
            }
        }

        // تابع لعرض/إخفاء تفاصيل المهنة
        function toggleProfessionDetails(row) {
            const detailsRow = row.nextElementSibling;
            detailsRow.classList.toggle('show');
            const icon = row.querySelector('i');
            if (icon) {
                if (detailsRow.classList.contains('show')) {
                    icon.className = 'fas fa-chevron-up';
                } else {
                    icon.className = 'fas fa-chevron-down';
                }
            }
        }

        // توابع لإضافة صفوف جديدة للجداول
        function addProfessionRow() {
            const table = document.getElementById('professionsTable');
            const newRow = document.createElement('tr');
            newRow.onclick = () => toggleProfessionDetails(newRow);
            newRow.innerHTML = `
                <td><input type="text" placeholder="المهنة"></td>
                <td><input type="text" placeholder="المجال المهني"></td>
                <td><input type="text" placeholder="لماذا؟"></td>
                <td><input type="text" placeholder="المهارات المطلوبة"></td>
                <td><input type="text" placeholder="المؤهلات الدراسية"></td>
                <td><i class="fas fa-chevron-down"></i></td>
            `;

            const detailsRow = document.createElement('tr');
            detailsRow.className = 'profession-details';
            detailsRow.innerHTML = `
                <td colspan="6">
                    <div class="row">
                        <div class="col">
                            <label>نوع العمل</label>
                            <input type="text" placeholder="مثال: حر، شركة، مؤسسة">
                        </div>
                        <div class="col">
                            <label>المتوسط السنوي</label>
                            <input type="text" placeholder="مثال: ... د.ت">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label>المسار التطوري</label>
                            <input type="text" placeholder="مثال: ...">
                        </div>
                        <div class="col">
                            <label>المواد الدراسية الأساسية</label>
                            <input type="text" placeholder="مثال: ...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ملاحظات إضافية</label>
                        <textarea placeholder="..."></textarea>
                    </div>
                </td>
            `;

            table.appendChild(newRow);
            table.appendChild(detailsRow);
        }

        function addSubjectRow() {
            const table = document.getElementById('subjectsTable');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" placeholder="المادة"></td>
                <td><input type="checkbox"></td>
                <td><input type="checkbox"></td>
                <td><input type="text" placeholder="المهن"></td>
                <td><input type="text" placeholder="الشعب"></td>
                <td>
                    <select>
                        <option>ممتاز</option>
                        <option>جيد جدًا</option>
                        <option>جيد</option>
                        <option>متوسط</option>
                        <option>ضعيف</option>
                    </select>
                </td>
            `;
            table.appendChild(newRow);
        }

        function addResultRow() {
            const table = document.querySelector('.section:nth-child(6) table tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" placeholder="المادة"></td>
                <td><input type="text" placeholder="المعدل"></td>
                <td><input type="text" placeholder="نقاط القوة"></td>
                <td><input type="text" placeholder="الصعوبات"></td>
                <td><input type="text" placeholder="التحسينات"></td>
            `;
            table.appendChild(newRow);
        }

        function addFollowupRow() {
            const table = document.querySelector('.section:nth-child(7) table tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" placeholder="التاريخ"></td>
                <td><input type="text" placeholder="الحدث/التفكير"></td>
                <td><input type="text" placeholder="التأثير"></td>
                <td><input type="text" placeholder="المصدر"></td>
            `;
            table.appendChild(newRow);
        }

        // تابع لعرض/إخفاء محتوى القسم
        function toggleSection(title) {
            const section = title.closest('.section');
            const content = section.querySelectorAll('.form-group, table, .guide-section, .example');

            content.forEach(el => {
                if (el.style.display === 'none') {
                    el.style.display = 'block';
                } else {
                    el.style.display = 'none';
                }
            });
        }

        // تهيئة الصفحة عند التحميل
        window.onload = function() {
            // إضافة المستمعين للأحداث
            document.getElementById('closeExport').addEventListener('click', closeExportOptions);
            document.getElementById('exportOverlay').addEventListener('click', closeExportOptions);

            // محاولة تحميل البيانات المحفوظة
            loadData();
        };
    </script>
</body>
</html>
